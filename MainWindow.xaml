<Window x:Class="WorkTimeWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        xmlns:lay="clr-namespace:LayUI.Wpf.Controls;assembly=LayUI.Wpf"
        Title="WorkTime - å·¥ä½œæ—¶é—´è®°å½•" Height="829" Width="1390"
        MinHeight="600" MinWidth="1000"
        WindowStartupLocation="CenterScreen"
        Background="#f5f5f5">

    <Window.Resources>
        <!-- æ ·å¼å®šä¹‰ -->
        <Style x:Key="HeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2c3e50"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#3498db"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3498db"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="CompleteButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#27ae60"/>
            <Setter Property="BorderBrush" Value="#27ae60"/>
        </Style>

        <Style x:Key="DeleteButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#e74c3c"/>
            <Setter Property="BorderBrush" Value="#e74c3c"/>
        </Style>

        <Style x:Key="TimerButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <!-- LayButtonæ ·å¼ - æ— èƒŒæ™¯è‰²ï¼Œæœ‰è¾¹æ¡† -->
        <Style x:Key="LayButtonStyle" TargetType="lay:LayButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3498db"/>
            <Setter Property="Foreground" Value="#3498db"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="LayButtonPrimaryStyle" TargetType="lay:LayButton" BasedOn="{StaticResource LayButtonStyle}">
            <Setter Property="BorderBrush" Value="#3498db"/>
            <Setter Property="Foreground" Value="#3498db"/>
        </Style>

        <Style x:Key="LayButtonDangerStyle" TargetType="lay:LayButton" BasedOn="{StaticResource LayButtonStyle}">
            <Setter Property="BorderBrush" Value="#e74c3c"/>
            <Setter Property="Foreground" Value="#e74c3c"/>
        </Style>

        <Style x:Key="LayButtonDefaultStyle" TargetType="lay:LayButton" BasedOn="{StaticResource LayButtonStyle}">
            <Setter Property="BorderBrush" Value="#95a5a6"/>
            <Setter Property="Foreground" Value="#95a5a6"/>
        </Style>

        <!-- DataGridæ ·å¼ - æ–‡æœ¬ç«–ç›´å±…ä¸­å’Œå›ºå®šè¡¨å¤´ -->
        <Style x:Key="ModernDataGridStyle" TargetType="DataGrid">
            <Setter Property="RowHeight" Value="35"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="AlternatingRowBackground" Value="#f8f9fa"/>
            <Setter Property="CanUserSortColumns" Value="True"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserResizeColumns" Value="True"/>
            <Setter Property="CanUserReorderColumns" Value="False"/>
            <Setter Property="FrozenColumnCount" Value="0"/>
            <Setter Property="TextOptions.TextRenderingMode" Value="ClearType"/>
            <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <!-- DataGridTextColumnæ ·å¼ - æ–‡æœ¬ç«–ç›´å±…ä¸­ï¼Œæ°´å¹³å·¦å¯¹é½ -->
        <Style x:Key="CenteredTextBlockStyle" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="Margin" Value="8,0"/>
            <Setter Property="TextOptions.TextRenderingMode" Value="ClearType"/>
            <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <Border Grid.Row="0" Background="#2c3e50" Padding="15,10">
            <Grid>
                <TextBlock Text="WorkTime" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                <TextBlock x:Name="CurrentTimeLabel" Text="" FontSize="12" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            </Grid>
        </Border>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" MinWidth="200"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" MinWidth="400"/>
            </Grid.ColumnDefinitions>

            <!-- åˆ†å‰²å™¨ -->
            <GridSplitter Grid.Column="1" Width="5" Background="#bdc3c7" HorizontalAlignment="Center" VerticalAlignment="Stretch" 
                          ResizeBehavior="PreviousAndNext" ShowsPreview="True"/>

            <!-- å·¦ä¾§ä»»åŠ¡ç®¡ç† -->
            <Border Grid.Column="0" Background="White" CornerRadius="5" Padding="10" Margin="0,0,5,0" BorderBrush="#e0e0e0" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- ä»»åŠ¡ç®¡ç†Tab -->
                    <lay:LayTabControl x:Name="TaskManagementTabControl">
                        <lay:LayTabControl.Resources>
                            <Style TargetType="lay:LayTabItem">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <ContentPresenter Content="{Binding}" />
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </lay:LayTabControl.Resources>
                        <lay:LayTabItem Header="ä»»åŠ¡åˆ—è¡¨">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- ä»»åŠ¡æŽ§åˆ¶æŒ‰é’® -->
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,10,0,5">
                                    <lay:LayButton x:Name="AddTaskButton" Content="âž• æ·»åŠ ä»»åŠ¡" Style="{StaticResource LayButtonPrimaryStyle}" Click="AddTaskButton_Click" Margin="0,0,5,0"/>
                                    <lay:LayButton x:Name="DeleteTaskButton" Content="ðŸ—‘ï¸ åˆ é™¤ä»»åŠ¡" Style="{StaticResource LayButtonDangerStyle}" Click="DeleteTaskButton_Click" IsEnabled="False" Margin="5,0,5,0"/>
                                </StackPanel>

                                <!-- ä»»åŠ¡åˆ—è¡¨ -->
                                <DataGrid x:Name="TasksDataGrid" Grid.Row="1" 
                                          Style="{StaticResource ModernDataGridStyle}"
                                          SelectionChanged="TasksDataGrid_SelectionChanged"
                                          Sorting="TasksDataGrid_Sorting"
                                          FontFamily="Microsoft YaHei UI"
                                          FontSize="13"
                                          TextOptions.TextFormattingMode="Display"
                                          TextOptions.TextRenderingMode="ClearType"
                                          SnapsToDevicePixels="True"
                                          UseLayoutRounding="True">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="ä»»åŠ¡åç§°" Binding="{Binding TaskName}" Width="*" IsReadOnly="True" SortMemberPath="TaskName" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                        <DataGridTextColumn Header="çŠ¶æ€" Binding="{Binding StatusDisplayName}" Width="80" IsReadOnly="True" SortMemberPath="TaskStatus" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                        <DataGridTextColumn Header="åˆ›å»ºæ—¶é—´" Binding="{Binding CreatedAtDisplay}" Width="100" IsReadOnly="True" SortMemberPath="CreatedAt" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </lay:LayTabItem>
                        
                        <lay:LayTabItem Header="å·²å®Œæˆä»»åŠ¡">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- å·²å®Œæˆä»»åŠ¡æŽ§åˆ¶ -->
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock Text="å·²å®Œæˆä»»åŠ¡åˆ—è¡¨" VerticalAlignment="Center" Margin="20,0,0,0" FontWeight="Bold"/>
                                </StackPanel>

                                <!-- å·²å®Œæˆä»»åŠ¡åˆ—è¡¨ -->
                                <DataGrid x:Name="CompletedTasksDataGrid" Grid.Row="1" 
                                          Style="{StaticResource ModernDataGridStyle}"
                                          FontFamily="Microsoft YaHei UI"
                                          FontSize="13"
                                          TextOptions.TextFormattingMode="Display"
                                          TextOptions.TextRenderingMode="ClearType"
                                          SnapsToDevicePixels="True"
                                          UseLayoutRounding="True">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="ä»»åŠ¡åç§°" Binding="{Binding TaskName}" Width="*" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                        <DataGridTextColumn Header="å®Œæˆæ—¶é—´" Binding="{Binding CompletedAtDisplay}" Width="120" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                        <DataGridTextColumn Header="æ€»è€—æ—¶" Binding="{Binding TotalDurationDisplay}" Width="100" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </lay:LayTabItem>
                    </lay:LayTabControl>
                </Grid>
            </Border>

            <!-- å³ä¾§ä¸»è¦å†…å®¹ -->
            <Grid Grid.Column="2" Margin="5,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- ä»»åŠ¡è¯¦æƒ…åŒºåŸŸ -->
                <Border Grid.Row="0" Background="White" CornerRadius="5" Padding="15" Margin="0,0,0,10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- ä»»åŠ¡ä¿¡æ¯ -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock x:Name="TaskNameLabel" Text="æœªé€‰æ‹©ä»»åŠ¡" FontSize="16" FontWeight="Bold" Grid.Column="0"/>
                            <TextBlock x:Name="TaskStatusLabel" Text="" FontSize="12" Grid.Column="1"/>
                        </Grid>

                        <!-- è®¡æ—¶å™¨æŽ§åˆ¶ -->
                        <Grid Grid.Row="1" Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock x:Name="TimerDisplay" Text="00:00:00" FontSize="24" FontWeight="Bold" 
                                       Foreground="#2c3e50" Grid.Column="0" VerticalAlignment="Center"/>

                            <Button x:Name="TimerButton" Content="å¼€å§‹è®¡æ—¶" Style="{StaticResource TimerButtonStyle}" 
                                    Grid.Column="2" Click="TimerButton_Click" IsEnabled="False" Margin="0,0,10,0"/>

                            <Button x:Name="CompleteTaskButton" Content="ä»»åŠ¡å·²å®Œæˆ" Style="{StaticResource CompleteButtonStyle}" 
                                    Grid.Column="3" Click="CompleteTaskButton_Click" IsEnabled="False" Visibility="Collapsed"/>
                        </Grid>

                        <!-- å¤‡æ³¨è¾“å…¥ -->
                        <Grid Grid.Row="3" Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="å¤‡æ³¨:" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBox x:Name="NotesTextBox" Grid.Column="1" Margin="0,0,10,0"/>
                            <Button x:Name="SaveNotesButton" Content="ä¿å­˜å¤‡æ³¨" Style="{StaticResource ButtonStyle}" 
                                    Grid.Column="2" Click="SaveNotesButton_Click" IsEnabled="False"/>
                        </Grid>
                    </Grid>
                </Border>

                <!-- æ—¶é—´è®°å½•åˆ—è¡¨ -->
                <Border Grid.Row="1" Background="White" CornerRadius="5" Padding="15" Margin="0,0,0,10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="æ—¶é—´è®°å½•" Style="{StaticResource HeaderStyle}" Grid.Column="0"/>
                            <Button x:Name="ToggleTimeRecordsButton" Content="â–¼" Style="{StaticResource ButtonStyle}" 
                                    Grid.Column="1" Click="ToggleTimeRecordsButton_Click" FontSize="12" Padding="8,4" Width="30" Height="25"/>
                        </Grid>

                        <Grid Grid.Row="1" x:Name="TimeRecordsHeaderGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock x:Name="TotalDurationLabel" Text="ä»»åŠ¡æ€»è€—æ—¶: 00:00:00" 
                                       FontWeight="Bold" Grid.Column="1" VerticalAlignment="Center"/>
                        </Grid>

                        <ScrollViewer Grid.Row="2" x:Name="TimeRecordsScrollViewer" VerticalScrollBarVisibility="Auto" 
                                      HorizontalScrollBarVisibility="Auto" MaxHeight="300">
                            <DataGrid x:Name="TimeRecordsDataGrid" 
                                      Style="{StaticResource ModernDataGridStyle}"
                                      SelectionChanged="TimeRecordsDataGrid_SelectionChanged"
                                      FontFamily="Microsoft YaHei UI"
                                      FontSize="13"
                                      TextOptions.TextFormattingMode="Display"
                                      TextOptions.TextRenderingMode="ClearType"
                                      SnapsToDevicePixels="True"
                                      UseLayoutRounding="True">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="å¼€å§‹æ—¶é—´" Binding="{Binding StartTimeDisplay}" Width="Auto" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                    <DataGridTextColumn Header="ç»“æŸæ—¶é—´" Binding="{Binding EndTimeDisplay}" Width="Auto" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                    <DataGridTextColumn Header="æŒç»­æ—¶é—´" Binding="{Binding DurationDisplay}" Width="Auto" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                    <DataGridTextColumn Header="å¤‡æ³¨" Binding="{Binding Notes}" Width="Auto" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </ScrollViewer>
                    </Grid>
                </Border>


                <!-- ç»Ÿè®¡åŒºåŸŸ -->
                <Border Grid.Row="2" Background="White" CornerRadius="5" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="ç»Ÿè®¡åˆ†æž" Style="{StaticResource HeaderStyle}" Grid.Column="0"/>
                            <Button x:Name="ToggleStatisticsButton" Content="â–¼" Style="{StaticResource ButtonStyle}" 
                                    Grid.Column="1" Click="ToggleStatisticsButton_Click" FontSize="12" Padding="8,4" Width="30" Height="25"/>
                        </Grid>

                        <Grid Grid.Row="1" x:Name="StatisticsControlsGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <TextBlock Text="æ—¶é—´æ®µ:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <ComboBox x:Name="TimePeriodComboBox" Width="120" SelectedIndex="0" SelectionChanged="TimePeriodComboBox_SelectionChanged">
                                    <ComboBoxItem Content="ä»Šæ—¥"/>
                                    <ComboBoxItem Content="æ˜¨æ—¥"/>
                                    <ComboBoxItem Content="æœ¬å‘¨"/>
                                    <ComboBoxItem Content="ä¸Šå‘¨"/>
                                    <ComboBoxItem Content="æœ¬æœˆ"/>
                                    <ComboBoxItem Content="ä¸Šæœˆ"/>
                                    <ComboBoxItem Content="ä»Šå¹´"/>
                                    <ComboBoxItem Content="åŽ»å¹´"/>
                                </ComboBox>
                                <Button x:Name="ExportButton" Content="ðŸ“Š å¯¼å‡ºæ•°æ®" Style="{StaticResource ButtonStyle}" 
                                        Margin="10,0,0,0" Click="ExportButton_Click"/>
                            </StackPanel>
                        </Grid>

                        <!-- å¿«é€Ÿç»Ÿè®¡ä¿¡æ¯ -->
                        <Grid Grid.Row="2" x:Name="QuickStatsGrid" Margin="0,10,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock x:Name="TotalTimeLabel" Text="æ€»å·¥ä½œæ—¶é—´: 00:00:00" FontWeight="Bold" Margin="0,0,0,5"/>
                                <TextBlock x:Name="ActiveTaskLabel" Text="å½“å‰æ´»åŠ¨ä»»åŠ¡: æ— " FontSize="12"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock x:Name="TaskCountLabel" Text="ä»»åŠ¡æ•°é‡: 0" FontWeight="Bold" Margin="0,0,0,5"/>
                                <TextBlock x:Name="CompletedTaskCountLabel" Text="å·²å®Œæˆ: 0" FontSize="12"/>
                            </StackPanel>
                        </Grid>

                        <!-- ç»Ÿè®¡Tab -->
                        <lay:LayTabControl Grid.Row="3" x:Name="StatisticsTabControl">
                            <lay:LayTabItem Header="æ–‡æœ¬ç»Ÿè®¡">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="ä»»åŠ¡è€—æ—¶ç»Ÿè®¡" FontWeight="Bold" Margin="0,0,0,10" Grid.Row="0"/>

                                    <DataGrid x:Name="TaskStatisticsDataGrid" Grid.Row="1" 
                                              Style="{StaticResource ModernDataGridStyle}"
                                              FontFamily="Microsoft YaHei UI"
                                              FontSize="13"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"
                                              SnapsToDevicePixels="True"
                                              UseLayoutRounding="True">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="ä»»åŠ¡åç§°" Binding="{Binding TaskName}" Width="*" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                            <DataGridTextColumn Header="æ€»è€—æ—¶" Binding="{Binding TotalDurationDisplay}" Width="120" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                            <DataGridTextColumn Header="ä¼šè¯æ¬¡æ•°" Binding="{Binding SessionCount}" Width="100" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                            <DataGridTextColumn Header="çŠ¶æ€" Binding="{Binding StatusDisplayName}" Width="100" IsReadOnly="True" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </lay:LayTabItem>

                            <lay:LayTabItem Header="ä»»åŠ¡å¯¹æ¯”å›¾">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="ä»»åŠ¡è€—æ—¶å¯¹æ¯”" FontWeight="Bold" Margin="0,0,0,10" Grid.Row="0"/>

                                    <Border Grid.Row="1" Background="#f8f9fa" CornerRadius="3" Padding="10">
                                        <lvc:CartesianChart x:Name="TaskComparisonChart" 
                                                           LegendLocation="Right"
                                                           Hoverable="True"
                                                           DataTooltip="{x:Null}">
                                            <lvc:CartesianChart.AxisX>
                                                <lvc:Axis Title="ä»»åŠ¡"/>
                                            </lvc:CartesianChart.AxisX>
                                            <lvc:CartesianChart.AxisY>
                                                <lvc:Axis Title="è€—æ—¶(å°æ—¶)"/>
                                            </lvc:CartesianChart.AxisY>
                                        </lvc:CartesianChart>
                                    </Border>
                                </Grid>
                            </lay:LayTabItem>

                            <lay:LayTabItem Header="æ€»æ—¶é•¿ç»Ÿè®¡">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="æ€»æ—¶é•¿ç»Ÿè®¡" FontWeight="Bold" Margin="0,0,0,10" Grid.Row="0"/>

                                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
                                        <TextBlock Text="å›¾è¡¨ç±»åž‹:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <ComboBox x:Name="ChartTypeComboBox" Width="120" SelectedIndex="0" SelectionChanged="ChartTypeComboBox_SelectionChanged">
                                            <ComboBoxItem Content="æŸ±çŠ¶å›¾"/>
                                            <ComboBoxItem Content="æŠ˜çº¿å›¾"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <Border Grid.Row="2" Background="#f8f9fa" CornerRadius="3" Padding="10">
                                        <lvc:CartesianChart x:Name="TotalDurationChart" 
                                                           LegendLocation="Right"
                                                           Hoverable="True"
                                                           DataTooltip="{x:Null}">
                                            <lvc:CartesianChart.AxisX>
                                                <lvc:Axis Title="æ—¶é—´"/>
                                            </lvc:CartesianChart.AxisX>
                                            <lvc:CartesianChart.AxisY>
                                                <lvc:Axis Title="å·¥ä½œæ—¶é•¿(å°æ—¶)"/>
                                            </lvc:CartesianChart.AxisY>
                                        </lvc:CartesianChart>
                                    </Border>
                                </Grid>
                            </lay:LayTabItem>
                        </lay:LayTabControl>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <Border Grid.Row="2" Background="#34495e" Padding="10,5">
            <Grid>
                <TextBlock x:Name="StatusLabel" Text="å°±ç»ª" Foreground="White" VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>
